<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>方田教育</title>
    <link rel="icon" href="_/images/favicon.ico">
    <!-- Bootstrap -->
    <link href="_/css/bootstrap.css" rel="stylesheet">
    <!-- fangtian css -->
    <link href="_/css/fangtian.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body >
    <!-- header star -->
    <header>
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html"><h1>方田教育</h1></a>
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li><a href="index.html">首页</a></li>
                        <li><a href="course.html">选课中心</a></li>
                        <li><a href="interaction.html">交流中心</a></li>
                        <li><a href="about.html">关于我们</a></li>

                        <li><a href="http://bbs.fangtian.me/forum.php">方田论坛</a></li>
                        <li class="hidden-sm hidden-xs">
                            <a id="dropdown_wx" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">关注官方微信
                                <span class="caret"></span>
                            </a>
                            <ul id="dropdown-wx-menu" class="dropdown-menu" role="menu">
                                <div class="wxqr thumbnail">
                                    <img src="_/images/wx_qrcode.jpg" alt="">
                                </div>
                                <div class="wx_desc">扫码二维码关注</div>
                            </ul>
                        </li>
                        <!-- 关注官方微信 -->
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#" data-toggle="modal" data-target="#registerModal">注册</a></li>
                        <li><a href="#" data-toggle="modal" data-target="#loginModal">登陆</a></li>
                    </ul>
                    <!-- 未登录 -->
                    <!-- <ul class="nav navbar-nav navbar-right">
                        <li role="presentation" class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-expanded="false">
                          李晓彤 <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu" role="menu">
                          <li><a href="#"><span class="glyphicon glyphicon-calendar" aria-hidden="true"></span> 我的课程</a></li>
                          <li><a href="#"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> 账号设置</a></li>
                          <li class="divider"></li>
                            <li><a href="#"><span class="glyphicon glyphicon-log-out" aria-hidden="true"></span> 退出登录</a></li>
                        </ul>
                    </li>
                      </ul> <!-- 已登录 -->
                </div>
                <!-- /.navbar-collapse -->
            </div>
            <!-- /.container-fluid -->
        </nav>
        <!-- login Modal -->
        <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title" id="loginModalLabel">登录</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <input type="phonenumber" class="form-control" placeholder="手机号码">
                        </div>
                        <div class="form-group">
                            <input type="password" class="form-control" placeholder="密码">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a href="">忘记密码？</a>
                        <!-- <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button> -->
                        <button type="button" class="btn btn-primary">登录</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- register Modal -->
        <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title" id="registerModalLabel">注册</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <input type="phonenumber" class="form-control" placeholder="手机号码">
                        </div>
                        <div class="form-group">
                            <input type="password" class="form-control" placeholder="密码">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary">注册</button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- header end -->
    <!-- course star -->
    <section id="course">
        <div class="container">
            <div class="content">
                <section class="col-lg-10 clearfix">
                    <!-- query_zone star-->
                    <div class="query_zone clearfix">
                        <div class="key clearfix">
                            <div class="col-sm-3 col-xs-6"><span data-toggle="collapse" data-target="#city" class="btn btn-info" id="key-city" key="all">所在地</span>
                                <button id="city-close" type="button" class="close hidden" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                            <div class="col-sm-3 col-xs-6"><span data-toggle="collapse" data-target="#area" class="btn btn-info" id="key-area" key="all">校区</span>
                                <button id="area-close" type="button" class="close hidden" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                            <div class="col-sm-3 col-xs-6"><span data-toggle="collapse" data-target="#grade" class="btn btn-info" id="key-grade" key="all">年级</span>
                                <button id="grade-close" type="button" class="close hidden" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                            <div class="col-sm-3 col-xs-6"><span data-toggle="collapse" data-target="#onlineoroffline" class="btn btn-info" id="key-onlineoroffline" key="all">授课方式</span>
                                <button id="onlineoroffline-close" type="button" class="close hidden" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                            <div class="col-sm-3 col-xs-6"><span data-toggle="collapse" data-target="#subject" class="btn btn-info" id="key-subject" key="all">学科</span>
                                <button id="subject-close" type="button" class="close hidden" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            </div>
                        </div>
                        <div class="collapse clearfix" id="city">
                            <div class="location well clearfix">
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default hidd" id="city深圳市" key="深圳市">深圳市</span></div>

                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default hidd" id="city合肥市" key="合肥市">合肥市</span></div>

                            </div>
                        </div>
                        <div class="collapse clearfix" id="area">
                            <div class="location well clearfix">
                                <!--foreach name='allArea' item='c'-->
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default hidd" id="area0" key="校区0">校区0</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default hidd" id="area1" key="校区1">校区1</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default hidd" id="area2" key="校区1">校区1</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default hidd" id="area3" key="校区1">校区1</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default hidd" id="area4" key="校区1">校区1</span></div>
                                <!--/foreach-->
                            </div>
                        </div>
                        <div class="collapse clearfix" id="grade">
                            <div class="location well clearfix">
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="1-1">小学一年级</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="1-2">小学二年级</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="1-3">小学三年级</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="1-4">小学四年级</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="1-5">小学五年级</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="1-6">小学六年级</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="2-1">初中一年级</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="2-2">初中二年级</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="2-3">初中三年级</span></div>

                        </div>
                        <div class="collapse clearfix" id="onlineoroffline">
                            <div class="location well clearfix">
                                <div class="col-xs-6"><span class="btn-block btn btn-default" key="0">网络直播</span></div>
                                <div class="col-xs-6"><span class="btn-block btn btn-default" key="1">实体面授</span></div>
                            </div>
                        </div>
                        <div class="collapse clearfix" id="subject">
                            <div class="location well clearfix">
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="1">数学</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="3">物理</span></div>
                                <div class="col-sm-3 col-xs-6"><span class="btn-block btn btn-default" key="4">化学</span></div>
                            </div>
                        </div>
                    </div>
                    <!-- query_zone end-->
                    <!-- course_list star -->
                    <div class="course_list">
                        <div class="classitem">
                            <div class="row ">
                                <div class="col-sm-2 col-xs-3 clearfix">
                                    <div class="course_img col-sm-12 ">
                                        <a href="#" class="thumbnail">
                                            <img src="_/images/course_icon.jpg" alt="...">
                                        </a>
                                    </div>
                                    <div class="course_title col-sm-12  ">
                                        <h5 class="bg-primary">数学</h5>
                                    </div>
                                    <div class="course_title col-sm-12  ">
                                        <h5 class="bg-danger">人教版</h5>
                                    </div>
                                </div>
                                <div class="detail col-sm-8 col-xs-9 clearfix">
                                    <div class="row">
                                        <div class="course_name">
                                            <h4>初一年级秋季同步拓展班</h4>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <p>开课日期：2015年2月1日</p>
                                            <p>结束日期：2015年6月17日</p>
                                            <p>任课老师：曹柯楠，徐宏远</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <p>上课时间：每周日8:00-10:30</p>
                                            <p>班级类型：基础，提高，尖子</p>
                                            <p>课程价格：2250元</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="visible-xs">
                                    <div class="clearfix"></div>
                                </div>
                                <div class="col-sm-2 course_sign">
                                    <span class="badge"><span>学位</span>97人</span>
                                    <button class="btn btn-danger" type="button"><a href="detail.html" style="color:white;">
                                        马上报名
                                    </a>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="classitem">
                            <div class="row ">
                                <div class="col-sm-2 col-xs-3 clearfix">
                                    <div class="course_img col-sm-12 ">
                                        <a href="#" class="thumbnail">
                                            <img src="_/images/course_icon.jpg" alt="...">
                                        </a>
                                    </div>
                                    <div class="course_title col-sm-12  ">
                                        <h5 class="bg-primary">数学</h5>
                                    </div>
                                    <div class="course_title col-sm-12  ">
                                        <h5 class="bg-danger">人教版</h5>
                                    </div>
                                </div>
                                <div class="detail col-sm-8 col-xs-9 clearfix">
                                    <div class="row">
                                        <div class="course_name">
                                            <h4>初一年级秋季同步拓展班</h4>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <p>开课日期：2015年2月1日</p>
                                            <p>结束日期：2015年6月17日</p>
                                            <p>任课老师：曹柯楠，徐宏远</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <p>上课时间：每周日8:00-10:30</p>
                                            <p>班级类型：基础，提高，尖子</p>
                                            <p>课程价格：2250元</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="visible-xs">
                                    <div class="clearfix"></div>
                                </div>
                                <div class="col-sm-2 course_sign">
                                    <span class="badge"><span>学位</span>97人</span>
                                    <button class="btn btn-danger" type="button">
                                        马上报名
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="classitem">
                            <div class="row ">
                                <div class="col-sm-2 col-xs-3 clearfix">
                                    <div class="course_img col-sm-12 ">
                                        <a href="#" class="thumbnail">
                                            <img src="_/images/course_icon.jpg" alt="...">
                                        </a>
                                    </div>
                                    <div class="course_title col-sm-12  ">
                                        <h5 class="bg-primary">数学</h5>
                                    </div>
                                    <div class="course_title col-sm-12  ">
                                        <h5 class="bg-danger">人教版</h5>
                                    </div>
                                </div>
                                <div class="detail col-sm-8 col-xs-9 clearfix">
                                    <div class="row">
                                        <div class="course_name">
                                            <h4>初一年级秋季同步拓展班</h4>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <p>开课日期：2017-2-1</p>
                                            <p>结束日期：2017-6-17</p>
                                            <p>任课老师：曹柯楠，徐宏远</p>
                                        </div>
                                        <div class="col-sm-6">
                                            <p>上课时间：每周日8:00-10:30</p>
                                            <p>班级类型：基础，提高，尖子</p>
                                            <p>课程价格：2250元</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="visible-xs">
                                    <div class="clearfix"></div>
                                </div>
                                <div class="col-sm-2 course_sign">
                                    <span class="badge"><span>学位</span>97人</span>
                                    <button class="btn btn-danger" type="button">
                                        马上报名
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- course_list end -->
                </section>
            </div>
            <div class="teachers visible-lg">
                <section class="col-lg-2">
                    <h5><strong>按照老师选择</strong></h5>
                    <ul>
                        <li>
                            <a href="#" class="thumbnail">
                                <img src="_/images/kenan.png" alt="...">
                            </a>
                            <h4>曹克楠老师</h4>
                            <h5>方田教育部主任</h5>
                        </li>
                        <li>
                            <a href="#" class="thumbnail">
                                <img src="_/images/course_icon.jpg" alt="...">
                            </a>
                            <h5>曹克楠老师</h5>
                            <h5>方田教育部主任</h5>
                        </li>
                    </ul>
                </section>
            </div>
    </section>
    <!-- course end -->
    <!-- footer star -->
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-sm-3 logo">
                    <img src="_/images/logo_b.png" alt="方田教育">
                    <span class="col-xs-12"> 每天进步一点点</span>
                </div>
                <p class="col-sm-9 hidden-xs">
                    版权所有2015-2017&nbsp;&nbsp;&nbsp; 合肥方了个田教育科技有限责任公司
                    <br>地址：合肥市蜀山区长江西路与合作化南路交口金域国际15楼
                    <br>电话：0551-65103821&nbsp;&nbsp;&nbsp; 邮箱：hr@fangtian.me
                    <br> © 2015 皖ICP备14012341号-1
                </p>
            </div>
        </div>
        <!-- container -->
    </div>
    <!-- footer end -->
    <!-- back-top star -->
    <div id="back-top-wrapper" class="visible-desktop">
        <p id="back-top">
            <a href="#top"><span class="glyphicon glyphicon-chevron-up"></span></a>
        </p>
    </div>
    <!-- back-top end -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="_/components/js/jQuery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="_/js/bootstrap.js"></script>
    <script src="_/js/fangtian.js"></script>
    <script type="text/javascript">
        var city = "";
        var gid = "";
        var gidname = "";
        var clicked = "";
        var p = 0;
        var f_refresh = true; //重新查询标记
        var more = true;

        function url(s) {
            location.href = s;
        }

        jQuery(document).ready(function() {

        setLabel("city");
        setLabel("area");
        setLabel("grade");
        setLabel("onlineoroffline");
        setLabel("subject");

        clickClose("city", "所在地");
        clickClose("area", "校区");
        clickClose("grade", "年级");
        clickClose("onlineoroffline", "授课方式");
        clickClose("subject", "学科");

        //如果登录，带城市和年级
        if (city == '') {
            city1 = "all";
        } else {
            city1 = city;
            $("#city-close").removeClass('hidden');
            $("#key-city").text(city);
            $("#key-city").attr("key", city);
            //$("#city").collapse('hide');
        }

        if (gid == '') {
            gid1 = "all";
        } else {
            gid1 = gid;
            $("#grade-close").removeClass('hidden');
            $("#key-grade").text(gidname);
            $("#key-grade").attr("key", gid);
            //$("#grade").collapse('hide');
        }
      console.log("getCourseNew");
        getCourseNew(city1,"all",gid1,"all","all",'');

        });


        function setLabel(name) {
            var a = "#" + name + "-close"; //关闭按钮
            var b = "#key-" + name; //按钮标题
            var c = "#" + name; //实际内容层
            //点击事件
            $(c).on('click', 'span', function(e) {
                f_refresh = true;
                p = 0;
                //$('#course_end_info').html("");
                //alert(f_refresh);
                clicked = name; //点了谁
                $(a).removeClass('hidden'); //打开关闭按钮
                $(b).text(this.innerText); //
                console.log(this.innerText);
                $(b).attr("key", $(this).attr("key"));
                $(c).collapse('hide'); //隐藏折叠层
                getCourseNew($("#key-city").attr("key"), $("#key-area").attr("key"), $("#key-grade").attr("key"), $("#key-onlineoroffline").attr("key"), $("#key-subject").attr("key"), ''); //重新搜索
            });
        }

        function clickClose(name, text) {
            var a = "#" + name + "-close"; //关闭按钮
            var b = "#key-" + name; //按钮

            //关闭按钮点击事件
            $(a).click(function() {

                f_refresh = true;
                p = 0;
                //$('#course_end_info').html("");
                //alert(f_refresh);

                //如果关闭了所在地，也需要关闭校区
                if (name == "city") {
                    $("#area-close").addClass('hidden'); //隐藏关闭按钮
                    $("#key-area").text("校区"); //按钮标题还原
                    $("#key-area").attr("key", "all"); //按钮值还原
                }
                clicked = "close";
                $(a).addClass('hidden'); //隐藏关闭按钮
                $(b).text(text); //按钮标题还原
                $(b).attr("key", "all"); //按钮值还原

                /*
                alert($("#key-city").attr("key"));
                alert($("#key-area").attr("key"));
                alert($("#key-grade").attr("key"));
                alert($("#key-onlineoroffline").attr("key"));
                alert($("#key-subject").attr("key"));
                */

                getCourseNew($("#key-city").attr("key"), $("#key-area").attr("key"), $("#key-grade").attr("key"), $("#key-onlineoroffline").attr("key"), $("#key-subject").attr("key"), '');
            });
        }

        //按老师查的时候初始化所有其他条件
        function clearLabel() {
            closeNotSearch("city", "所在地");
            closeNotSearch("area", "校区");
            closeNotSearch("grade", "年级");
            closeNotSearch("onlineoroffline", "授课方式");
            closeNotSearch("subject", "学科");
        }

        //不查询
        function closeNotSearch(name, text) {
            var a = "#" + name + "-close";
            var b = "#key-" + name;
            $(a).addClass('hidden');
            $(b).text(text);
            $(b).attr("key", "all");
        }

        function resetCity() {
            $("#city div div span").each(function() {
                $(this.parentNode).hide();　　　
                for (var i = 0; i < nowCity.length; i++) {
                    // alert(nowCity[i]+"-"+$(this).attr("key"));
                    if (nowCity[i] == $(this).attr("key")) {
                        $(this.parentNode).show()
                    }
                }
            });
        }

        function resetArea() {
            $("#area div div span").each(function() {
                $(this.parentNode).hide();
            });

            //alert("resetArea nowArea="+JSON.stringify(nowArea));
            for (var i = 0; i < nowArea.length; i++) {
                $("#area" + i).attr("key", nowArea[i]);
                $("#area" + i).html(nowArea[i]);
                $("#area" + i).parent().show();
            }
        }

        function resetGrade() {
            $("#grade div div span").each(function() {
                $(this.parentNode).hide();　　　　
                for (var key in nowGrade) {
                    if (key == $(this).attr("key")) {
                        $(this.parentNode).show()
                    }
                }
            });
        }

        function resetOnlineoroffline() {
            $("#onlineoroffline div div span").each(function() {
                $(this.parentNode).hide();　　　　
                for (var key in nowOnlineoroffline) {
                    //alert(key+"-"+$(this).attr("key"));
                    if (key == $(this).attr("key")) {
                        $(this.parentNode).show()
                    }
                }
            });
        }

        function resetSubject() {
            $("#subject div div span").each(function() {
                $(this.parentNode).hide();　　　　
                for (var key in nowSubject) {
                    if (key == $(this).attr("key")) {
                        $(this.parentNode).show()
                    }
                }
            });
        }

        function getCourseNew(c_city, c_area, c_grade, c_onlineoroffline, c_subject, tid) {
       $.getJSON("/fangtian_ol/index.php/Course/getCourseNew.html", {
           city: c_city,
           area: c_area,
           gid: c_grade,
           onlineoroffline: c_onlineoroffline,
           sid: c_subject,
           tid: tid,
           p: p
       }, function(data) {
           if (data.status == 1) {
               str_course = data.info;

               if (f_refresh) {
                   $("#course_list").html(str_course);
               } else {
                   $("#course_list").append(str_course);
               }

               //alert("show");
               //alert(str_course);
               nowCity = data.data['nowCity'];
               nowArea = data.data['nowArea'];
               nowGrade = data.data['nowGrade'];
               nowSubject = data.data['nowSubject'];
               nowOnlineoroffline = data.data['nowOnlineoroffline'];
               // alert("count subject="+nowSubject[3]+"count city"+nowCity.length);

               resetCondition();
               finished = true;

               $('#p').val(data.data['p']);
               $('#total_page').val(data.data['total_page']);
               showCourseEndInfo();

           } else {
               alert("获取数据失败，请重试");
           }
       });
   }
    </script>
</body>

</html>
